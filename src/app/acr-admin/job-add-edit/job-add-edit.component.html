<section>
  <!-- Full Page Loader -->
  <div class="full-page-loader" *ngIf="showLoader">
    <div class="loader-content">
      <div class="loader-spinner">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
      <div class="loader-text">{{isEditMode ? 'Updating Job...' : 'Creating Job...'}}</div>
      <div class="loader-subtext">Please wait while we process your request</div>
    </div>
  </div>

  <div class="container">
    <div class="Titleheading">
      <h2>{{isEditMode ? 'Edit Job Post' : 'Create Job Post'}}</h2>
    </div>

    <!-- Project Details Card -->
    <div class="project-details-card" *ngIf="projectDetails">
      <div class="project-card-header">
        <h3>Project Information</h3>
      </div>
      <div class="project-card-body">
        <div class="project-info-grid">
          <div class="project-info-item">
            <label>Project Name:</label>
            <span class="project-name">{{projectDetails.projectName}}</span>
          </div>
          <div class="project-info-item">
            <label>Client:</label>
            <span class="project-client">{{projectDetails.client}}</span>
          </div>
          <div class="project-info-item">
            <label>Location:</label>
            <span class="project-location">{{projectDetails.clientLocation}}</span>
          </div>
          <div class="project-info-item">
            <label>Work Type:</label>
            <span class="project-work-type">{{projectDetails.workType}}</span>
          </div>
          <div class="project-info-item">
            <label>Positions:</label>
            <span class="project-positions">{{projectDetails.noOfPositions}}</span>
          </div>
          <div class="project-info-item">
            <label>Day Rate Range:</label>
            <span class="project-rate">£{{projectDetails.dayRatesRange?.min}} - £{{projectDetails.dayRatesRange?.max}}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="FlatCard">
      <div class="row">
        <div class="col-lg-7 col-xl-7 col-12">
          <div class="FormRight-panel">
            <!-- Loading state for edit mode -->
            <div *ngIf="isEditMode && showLoader" class="loading-container">
              <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <span>Loading job details...</span>
              </div>
            </div>

            <form [formGroup]="jobForm" (ngSubmit)="onSubmit()" *ngIf="!isEditMode || !showLoader">

              <div class="row">
                <div class="col-md-5">
                  <label>Status<span style="color: red;">*</span>:</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <select class="form-control" formControlName="status">
                      <option value="" disabled selected hidden>Select Status</option>
                      <option value="Active">Active</option>
                      <option value="Inactive">Inactive</option>
                    </select>
                    <span class="text-danger"
                      *ngIf="jobForm.get('status')?.touched && jobForm.get('status')?.errors?.['required']">
                      Please select a status.
                    </span>
                  </div>
                </div>
              </div>

              <!-- Conditionally display Job ID when status is 'Active' -->
              <div class="row" *ngIf="jobForm.get('status')?.value === 'Active'">
                <div class="col-md-5">
                  <label>Job ID :</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Job ID" formControlName="job_id" readonly
                      value="{{jobID}}">
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Job Type<span style="color: red;">*</span>:</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <select class="form-control" formControlName="job_type">
                      <option value="" disabled selected hidden>Select Job type</option>
                      <option value="QA">QA</option>
                      <option value="Non-QA">Non-QA</option>
                    </select>
                    <span class="text-danger"
                      *ngIf="jobForm.get('job_type')?.touched && jobForm.get('job_type')?.errors?.['required']">
                      Please select a job type.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Job Title<span style="color: red;">*</span>:</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Enter Job Title" formControlName="job_title">
                    <span class="text-danger"
                      *ngIf="jobForm.get('job_title')?.touched && jobForm.get('job_title')?.errors?.['required']">
                      Please enter the job title.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>No. of Roles<span style="color: red;">*</span>:</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Enter no of roles"
                      formControlName="no_of_roles">
                    <span class="text-danger"
                      *ngIf="jobForm.get('no_of_roles')?.touched && jobForm.get('no_of_roles')?.errors?.['required']">
                      Please select no of roles.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Position Start Date<span style="color: red;">*</span> :</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="date" class="form-control" formControlName="start_date"
                      placeholder="Position Start Date">
                    <span class="text-danger"
                      *ngIf="jobForm.get('start_date')?.touched && jobForm.get('start_date')?.errors?.['required']">
                      Please select position start date.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Job Expire Date<span style="color: red;">*</span> :</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="date" class="form-control" formControlName="jobExpireDate"
                      placeholder="Job Expire Date">
                    <span class="text-danger"
                      *ngIf="jobForm.get('jobExpireDate')?.touched && jobForm.get('jobExpireDate')?.errors?.['required']">
                      Please select job expire date.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Published Date<span style="color: red;">*</span> :</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" formControlName="publish_date"
                      placeholder="Auto Detect System Calendar" readonly>
                    <span class="text-danger"
                      *ngIf="jobForm.get('publish_date')?.touched && jobForm.get('publish_date')?.errors?.['required']">
                      Please select published date.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Client Name<span style="color: red;">*</span>
                    :</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Client Name" formControlName="client_name">
                    <span class="text-danger"
                      *ngIf="jobForm.get('client_name')?.touched && jobForm.get('client_name')?.errors?.['required']">
                      Please enter the client name.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-5">
                  <label>Location<span style="color: red;">*</span>
                    :</label>
                </div>
                <div class="col-md-7">
                  <input type="text" class="form-control" placeholder="Enter Location" formControlName="location">
                  <span class="text-danger"
                    *ngIf="jobForm.get('location')?.touched && jobForm.get('location')?.errors?.['required']">
                    Please select the location.
                  </span>
                </div>
              </div>
              <br />
              <div class="row">
                <div class="col-md-5">
                  <label>Day Rate<span style="color: red;">*</span>:</label>
                </div>
                <div class="col-md-7">
                  <div class="form-group">
                    <input type="text" class="form-control" placeholder="Day Rate" formControlName="day_rate">
                    <span class="text-danger"
                      *ngIf="jobForm.get('day_rate')?.touched && jobForm.get('day_rate')?.errors?.['required']">
                      Please enter the day rate.
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="update ml-auto mr-auto"><br>
                  <button type="submit" style="float: right !important;" class="btn btn-primary btn-round"
                    [disabled]="jobForm.invalid || showLoader">
                    <span *ngIf="!showLoader">{{isEditMode ? 'Update Job' : 'Post Job'}}</span>
                    <span *ngIf="showLoader">
                      <i class="fas fa-spinner fa-spin"></i>
                      {{isEditMode ? 'Updating Job...' : 'Creating Job...'}}
                    </span>
                  </button>
                </div>
              </div>
            </form>
          </div><br><br><br>
        </div>
        <div class="col-lg-5 col-xl-5 col-12">
          <div class="FormLeft-panel">
            <div class="text-center">
              <img src="../../../../assets/img/Saivenlogo.png" width="200" class="mb-5" />
            </div>
            <h1 class="HeadingLarge">"Elevate Your Career with SaiVen: Join Public Sector IT Projects"</h1>
            <p class="mb-5 textfont">SaiVen, is an emerging IT QA lead business with 40+ business collaborations
              across UK and India. We are a dedicated business to lead the governance of all public sector QA projects
              signed by the group and we are the driving force for client relationship management, project governance,
              and people/delivery management.<br><br>
              Our job is to ensure seamless execution for exceptional results, through bringing our industry expertise
              added with right skills at right time - enabling quick and cost-effective resource augmentation, for
              benefit of our clients.<br><br>Partner with us for exciting contract opportunities and be a part of our
              success
              story</p>
            <p><strong>SaiVen Technology Solutions Limited</strong><br>
              1-04, Focal Point, <br>27-35 Fleet Street, <br>Swindon SN1 1RQ
            </p>
            <p>Company Registration Number: 8856876</p>
            <p>Email: Info&#64;saivensolutions.co.uk</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
