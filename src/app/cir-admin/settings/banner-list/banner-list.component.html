<div class="banner-list-container">
  <div class="header">
    <h2>Banner Management</h2>
    <p class="subtitle">Manage system banners and notifications</p>
  </div>

  <div class="banner-content">
    <!-- Add Banner Button -->
    <div class="action-bar">
      <button class="btn btn-primary" (click)="addBanner()">
        <i class="fas fa-plus"></i>
        Add New Banner
      </button>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner">
        <i class="fas fa-spinner fa-spin fa-2x"></i>
        <p>Loading banners...</p>
      </div>
    </div>

    <!-- Banner List Table -->
    <div class="banner-table-container" *ngIf="!isLoading">
      <div class="table-responsive">
        <table class="table table-striped">
                     <thead>
             <tr>
               <th>Sr No</th>
               <th>Page Type</th>
               <th>Logo</th>
               <th>Background Color</th>
               <th>Content Preview</th>
               <th>Created Date</th>
               <th>Actions</th>
             </tr>
           </thead>
          <tbody>
            <tr *ngFor="let banner of paginatedBanners; let i = index">
              <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
              <td>
                <div class="banner-title">
                  <strong>{{ getPageTypeLabel(banner.page_type) }}</strong>
                </div>
              </td>
              <td>
                <div class="logo-preview">
                  <img *ngIf="banner.logo"
                       [src]="banner.logo"
                       alt="Banner Logo"
                       class="logo-thumbnail"
                       (error)="onImageError($event)">
                  <div *ngIf="!banner.logo" class="no-logo">
                    <i class="fas fa-image"></i>
                    <span>No Logo</span>
                  </div>
                </div>
              </td>
              <td>
                <div class="color-preview">
                  <div class="color-swatch"
                       [style.background-color]="banner.background_color || '#ffffff'">
                  </div>
                  <span class="color-value">{{ banner.background_color || '#ffffff' }}</span>
                </div>
              </td>
              <td>
                <div [innerHTML]="getBannerDetailsPreview(banner.content)"></div>
              </td>
              <td>
                <div class="date-info">
                  {{ formatDate(banner.createdAt || '') }}
                </div>
              </td>
              <td>
                <div class="action-buttons">
                  <button
                    class="btn btn-sm btn-outline-info"
                    (click)="showBannerPreview(banner)"
                    title="View Banner Preview"
                    [disabled]="isLoading">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button
                    class="btn btn-sm btn-outline-primary"
                    (click)="editBanner(banner)"
                    title="Edit Banner"
                    [disabled]="isLoading">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button
                    class="btn btn-sm btn-outline-danger"
                    (click)="deleteBanner(banner)"
                    title="Delete Banner"
                    [disabled]="isLoading">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="banners.length === 0">
              <td colspan="7" class="text-center no-data">
                <div class="no-data-content">
                  <i class="fas fa-image fa-3x text-muted"></i>
                  <p class="text-muted">No banners found</p>
                  <button class="btn btn-primary" (click)="addBanner()">
                    <i class="fas fa-plus"></i>
                    Add Your First Banner
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination-container" *ngIf="totalItems > itemsPerPage">
        <!-- <ngx-pagination
          [(page)]="currentPage"
          [totalItems]="totalItems"
          [itemsPerPage]="itemsPerPage"
          [maxSize]="5"
          [rotate]="true"
          [boundaryLinks]="true"
          [directionLinks]="true"
          (pageChange)="onPageChange($event)"
          previousText="&lsaquo;"
          nextText="&rsaquo;"
          firstText="&laquo;"
          lastText="&raquo;">
        </ngx-pagination> -->
      </div>
    </div>
  </div>

  <!-- Banner Preview Modal -->
  <div class="modal fade"
       [class.show]="showPreviewModal"
       [style.display]="showPreviewModal ? 'block' : 'none'"
       tabindex="-1"
       role="dialog"
       (click)="closePreviewModal()">
    <div class="modal-dialog modal-lg modal-dialog-centered"
         role="document"
         (click)="$event.stopPropagation()">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="fas fa-eye me-2"></i>
            Banner Preview - {{ selectedBannerPageType }}
          </h5>
          <button type="button"
                  class="btn-close"
                  (click)="closePreviewModal()"
                  aria-label="Close">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <!-- Banner Preview Container -->
          <div class="banner-preview-wrapper">
            <div class="banner-preview-container">

              <!-- Logo Section - Centered -->
              <div class="banner-logo-section" *ngIf="selectedBannerLogo">
                <div class="logo-container" [class.loading]="isImageLoading">
                  <img [src]="selectedBannerLogo"
                       alt="Banner Logo"
                       class="banner-logo"
                       (load)="onImageLoad()"
                       (error)="onImageError($event)">
                </div>
              </div>

              <!-- No Logo Message - Centered -->
              <div class="banner-logo-section" *ngIf="!selectedBannerLogo">
                <div class="no-logo-container">
                  <i class="fas fa-image fa-3x"></i>
                  <p>No Logo Available</p>
                </div>
              </div>

              <!-- Content Section with Background Color -->
              <div class="banner-content-section"
                   [style.background-color]="selectedBannerBackgroundColor">
                <div class="banner-full-content"
                     [innerHTML]="selectedBannerContent">
                </div>
              </div>
            </div>
          </div>

          <!-- Banner Details -->
          <!-- <div class="banner-details mt-4">
            <h6 class="details-title">
              <i class="fas fa-info-circle me-2"></i>
              Banner Details
            </h6>
            <div class="row">
              <div class="col-md-6">
                <div class="detail-item">
                  <label>Background Color:</label>
                  <div class="color-preview">
                    <div class="color-swatch"
                         [style.background-color]="selectedBannerBackgroundColor">
                    </div>
                    <span class="color-value">{{ selectedBannerBackgroundColor }}</span>
                  </div>
                </div>
              </div>
              <div class="col-md-6" *ngIf="selectedBannerLogo">
                <div class="detail-item">
                  <label>Logo:</label>
                  <div class="logo-preview">
                    <img [src]="selectedBannerLogo"
                         alt="Logo Preview"
                         class="logo-thumbnail"
                         (click)="viewFullSizeLogo(selectedBannerLogo)"
                         (error)="onImageError($event)">
                    <div class="logo-info">
                      <small class="text-muted">Click to view full size</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        </div>
        <div class="modal-footer">
          <button type="button"
                  class="btn btn-secondary"
                  (click)="closePreviewModal()">
            <i class="fas fa-times me-1"></i>
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Backdrop -->
  <div class="modal-backdrop fade"
       [class.show]="showPreviewModal"
       [style.display]="showPreviewModal ? 'block' : 'none'">
  </div>
</div>
